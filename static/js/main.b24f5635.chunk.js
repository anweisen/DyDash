(this.webpackJsonpdydash=this.webpackJsonpdydash||[]).push([[0],{33:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),a=n(24),o=n.n(a),r=n(3),i=n(6),l=n(2),j=n(61),u=n(11),h=n(13),d=(n(33),n(0)),b=[{name:"Player",fields:["Player Name","Access Token"]},{name:"Token",fields:["Access Token"]}],O="Cloud Hostaddress";function m(e){var t=e.method,n=e.hooks;return Object(d.jsx)(d.Fragment,{children:t.fields.map((function(e){return Object(d.jsx)(v,{name:e,hooks:n},e)}))})}function v(e){var t=e.name,n=e.hooks,s=Object(c.useState)(),a=Object(r.a)(s,2),o=a[0],i=a[1];return n[t]={value:o,set:i},Object(d.jsx)("input",{className:"input",placeholder:t,onChange:function(e){return i(e.target.value)}})}function f(e){var t=e.status,n=e.setStatus,a=e.text,o=e.onIcon,i=e.offIcon,l=Object(c.useState)(t),j=Object(r.a)(l,2),u=j[0],h=j[1];return Object(d.jsxs)("div",{className:"box",onClick:function(e){n(!t),h(!1),setTimeout((function(){h(!0)}),1)},children:[Object(d.jsx)("p",{className:"text",children:a}),t?s.a.createElement(o,{className:"icon"+(u?"":" rotated")}):s.a.createElement(i,{className:"icon"+(u?" rotated":"")})]})}function x(e){var t=e.method,n=e.setMethod,s=e.encryption,a=e.setEncryption,o=e.hooks,i=Object(c.useState)(!0),l=Object(r.a)(i,2),j=l[0],u=l[1];return Object(d.jsxs)("div",{className:"LoginSelect",children:[Object(d.jsxs)("div",{className:"box",onClick:function(e){return u(!j)},children:[Object(d.jsx)("p",{className:"text",children:null==t?"Select Method":t.name}),Object(d.jsx)(h.c,{className:"icon"+(j?"":" rotated")})]}),Object(d.jsx)("div",{className:"dropdown-container",children:Object(d.jsx)("span",{className:"dropdown"+(j?"":" shown"),children:Object(d.jsx)("div",{className:"dropdown-selection",children:b.map((function(e){return Object(d.jsx)("p",{className:e===t?"current":"",onClick:function(t){n(e),u(!0)},children:e.name},e.name)}))})})}),Object(d.jsx)(f,{status:s,setStatus:a,text:"SSL Encryption",onIcon:h.b,offIcon:h.a}),Object(d.jsx)(v,{name:O,hooks:o}),null!=t?Object(d.jsx)(m,{method:t,hooks:o}):null]})}function p(e){var t=e.setCookies,n=Object(c.useState)(),s=Object(r.a)(n,2),a=s[0],o=s[1],i=Object(c.useState)(!1),j=Object(r.a)(i,2),h=j[0],b=j[1],m=Object(c.useState)(!1),v=Object(r.a)(m,2),f=v[0],p=v[1],k={};function g(e){var t=e.to;return h?Object(d.jsx)(l.a,{to:t}):null}return Object(d.jsxs)("div",{className:"Login",children:[Object(d.jsxs)("div",{className:"header",children:[Object(d.jsx)("img",{alt:"",src:"logo-sized.png"}),Object(d.jsx)("h1",{children:"DyCloud \xbb Dashboard"})]}),Object(d.jsx)("div",{className:"form-container",children:Object(d.jsxs)("div",{className:"form",children:[Object(d.jsx)("h1",{children:"Login"}),Object(d.jsx)(x,{method:a,setMethod:o,encryption:f,setEncryption:p,hooks:k}),Object(d.jsx)("div",{className:"button",onClick:function(e){if(e.preventDefault(),null!=a){var n=k[O].value,c={magAge:36288e3};t("encryption",f),t("method",a.name,c),t("host",n,c);var s,o="",r=Object(u.a)(a.fields);try{for(r.s();!(s=r.n()).done;){var i=s.value;o.length>0&&(o+=":"),o+=k[i].value}}catch(l){r.e(l)}finally{r.f()}t("token",o,c),b(!0)}},children:"Login"}),Object(d.jsx)(g,{to:"/"})]})})]})}function k(e){var t=e.cookies,n=e.setCookies;for(var c in t)"cookieconsent_status"!==c&&n(c,"",{expires:new Date(0)});return Object(d.jsx)(l.a,{to:"/login"})}var g,N,y=n(8),S=n.n(y),C=n(15),E=n(25),w=n(26),P=n(27),L=n.n(P);(N=g||(g={})).UPGRADE_WEBSOCKET={path:"/upgrade",method:"get"},N.ONLINE_PLAYERS={path:"/player/online",method:"get"};var A=function(){function e(t,n,c){Object(E.a)(this,e),this.host=void 0,this.auth=void 0,this.encryption=void 0,this.socket=void 0,this.encryption=t,this.host=n,this.auth=c}return Object(w.a)(e,[{key:"getAuth",value:function(){return"".concat(this.auth.method," ").concat(this.auth.token)}},{key:"initSocket",value:function(e){this.socket=e,this.socket.onmessage=function(e){var t=e.data;console.log("WebSocket: "+t)}}},{key:"useUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.encryption?"https":"http",c="";for(var s in t)""===c?c="?":c+="&",c+=s,c+="=",c+=encodeURIComponent(t[s]);return"".concat(n,"://").concat(this.host,"/v").concat(1).concat(e.path).concat(c)}},{key:"upgradeWebSocket",value:function(){return new WebSocket(this.useUrl(g.UPGRADE_WEBSOCKET,{auth:this.getAuth()},this.encryption?"wss":"ws"))}},{key:"makeRequest",value:function(){var e=Object(C.a)(S.a.mark((function e(t){var n,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.useUrl(t),c=Date.now(),e.abrupt("return",L()(n,{headers:{Authorization:this.getAuth()},timeout:3500,method:t.method}).then((function(e){return console.log("Fetched ".concat(t.path," in ").concat(Date.now()-c,"ms")),e.data})));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchPlayers",value:function(){var e=Object(C.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.makeRequest(g.ONLINE_PLAYERS));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function D(e){var t=e.name,n=e.icon,c=e.path;return Object(d.jsx)("div",{children:Object(d.jsxs)(i.b,{to:c,className:"NavEntry",children:[s.a.createElement(n,{className:"icon"}),Object(d.jsx)("p",{className:"name",children:t})]})})}n(54);var F=[{name:"Overview",path:"/",icon:h.d},{name:"Players",path:"player",icon:h.f},{name:"Services",path:"service",icon:h.h},{name:"Logout",path:"logout",icon:h.e}];function I(){return Object(d.jsxs)("div",{className:"Nav",children:[Object(d.jsxs)("div",{className:"header",children:[Object(d.jsx)("img",{alt:"",src:"logo-sized.png"}),Object(d.jsx)("h1",{children:"DyCloud"})]}),Object(d.jsx)("div",{className:"links",children:F.map((function(e){return Object(d.jsx)(D,{name:e.name,icon:e.icon,path:e.path},e.path)}))})]})}n(55);function T(){return Object(d.jsx)("div",{className:"Loader",children:Object(d.jsxs)("div",{className:"lds-ellipsis",children:[Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{})]})})}function R(e){var t=e.name,n=e.value;return Object(d.jsxs)("div",{className:"Card",children:[Object(d.jsx)(h.g,{className:"icon"}),Object(d.jsx)("p",{className:"name",children:t}),Object(d.jsx)("p",{className:"value",children:n})]})}function U(e){var t=e.api,n=Object(c.useState)(),s=Object(r.a)(n,2),a=s[0],o=s[1];return Object(c.useEffect)((function(){null==a&&t.fetchPlayers().then((function(e){return o(e)}))})),Object(d.jsx)("div",{className:"Overview Dashboard-Component",children:null==a?Object(d.jsx)(T,{}):Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(R,{name:"Online Player",value:a.length})})})}function W(e){var t=e.api,n=Object(c.useState)(),s=Object(r.a)(n,2),a=s[0],o=s[1];return Object(c.useEffect)((function(){null==a&&t.fetchPlayers().then((function(e){return o(e)}))})),Object(d.jsx)("div",{className:"Players Dashboard-Component",children:null==a?Object(d.jsx)(T,{}):Object(d.jsx)(d.Fragment,{})})}n(56);function _(e){var t=e.cookies,n=Object(c.useState)(),s=Object(r.a)(n,2),a=s[0],o=s[1];return Object(c.useEffect)((function(){if(null==a)try{var e=new A("true"===t.encryption,t.host,{method:t.method,token:t.token}),n=e.upgradeWebSocket();n.onerror=function(){o(!1)},n.onopen=function(){e.initSocket(n),o(e)}}catch(c){console.error("Could not establish websocket connection"),console.error(c),o(!1)}})),Object(d.jsx)(d.Fragment,{children:null==a?Object(d.jsx)(T,{}):a?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(I,{}),Object(d.jsx)("div",{className:"content",children:Object(d.jsxs)(l.d,{children:[Object(d.jsx)(l.b,{path:"/",element:Object(d.jsx)(U,{api:a})}),Object(d.jsx)(l.b,{path:"player",element:Object(d.jsx)(W,{api:a})})]})})]}):Object(d.jsx)(l.a,{to:"login"})})}n(57);function B(){var e=Object(j.a)(["encryption","host","method","token"]),t=Object(r.a)(e,2),n=t[0],c=t[1],s=null!=n.method&&null!=n.host&&null!=n.token;return Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(i.a,{children:Object(d.jsxs)(l.d,{children:[Object(d.jsx)(l.b,{path:"logout",element:Object(d.jsx)(k,{cookies:n,setCookies:c})}),Object(d.jsx)(l.b,{path:"login",element:Object(d.jsx)(p,{setCookies:c})}),Object(d.jsx)(l.b,{path:"*",element:s?Object(d.jsx)(_,{cookies:n}):Object(d.jsx)(l.a,{to:"/login"})})]})})})}var M=function(e){null!=e&&n.e(3).then(n.bind(null,62)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),c(e),s(e),a(e),o(e)}))};n(58);o.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(B,{})}),document.getElementById("root")),M(void 0)}},[[59,1,2]]]);
//# sourceMappingURL=main.b24f5635.chunk.js.map